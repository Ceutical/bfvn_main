# The script of the game goes in this file.

# Declare characters used by this game. The color argument colorizes the
# name of the character.

define p = Character("Protagonist")
define o = Character("Octavia1")

######################################

##### TRANSFORM DEFINITIONS #####


transform protagonist:
    xalign 0.0
    yalign 1.0
  
transform antagonist:
    xalign 0.95
    yalign 0.05

transform pattack:
    xalign 0.8
    yalign 0.05
    
transform aattack:
    xalign 0.15
    yalign 1.0

transform rotation:
    around (.5, .5) alignaround (.5, .5) xalign .5 yalign .5
    rotate 10
    

######################################
label startbattle:
    play music poketheme fadeout 1.0
    
    $ HP_dog = 100
    $ HP_stick = 100
    $ HP_street = 100
    $ HP_paper = 100
    $ HP_garb = 100
    $ HP_bike = 100
    $ activeHP_a = 100
    $ activeHP_b = 100
    $ active_a = ""
    $ active_o = "empty"
    $ defense = 2
    $ queued = "no"
    
    default advantage = [("dog", "paper"), ("stick","bike"), ("street","garbage")]
    default disadvantage = [("dog", "bike"), ("stick","garbage"), ("street","bike")]

    scene bg pokemon with fade
    "Du wirst herausgefordert von [o]"
    
label switch:
    
  
    if active_a == "dog":
        $ HP_dog = activeHP_a
    elif active_a == "stick":
        $ HP_stick = activeHP_a
    elif active_a == "street":
        $ HP_street = activeHP_a

    if HP_dog <= 0 and HP_stick <= 0 and HP_street <= 0:
        jump loss
    elif HP_paper <= 0 and HP_garb <= 0 and HP_bike <= 0:
        jump win      
    else:
        "Welches Monster wirst du wählen?"
        
    
    menu:
        "Dalmatiger" if HP_dog >= 0:
            n "Hmm, Dalmatiger ist gut gegen Papiermonster aber schlecht gegen Fahrradmonster!"
            menu:
                n "Hmm, Dalmatiger ist gut gegen Papiermonster aber schlecht gegen Fahrradmonster!"
                "Dalmatiger in den Kampf schicken!":
                    if active_a = "stick":
                        play sound pokout
                        hide pogdog
                        with moveoutleft
                    elif active_a = "street":
                        play sound pokout
                        hide pokstreet
                        with moveoutleft
                    $ active_a = "dog"
                    play sound pokin
                    show pokdog at protagonist
                    with moveinleft
                    p "Los Dalmatiger!"
                    $ activeHP_a = HP_dog
                    
                "Doch lieber ein anderes Monster..." if HP_stick >= 0 or HP_street >= 0:
                    jump switch
        
        "Sticky" if HP_stick >= 0:
            n "Hmm, Sticky ist gut gegen Fahrradmonster aber schlecht gegen Müllmonster."
            menu:
                n "Hmm, Sticky ist gut gegen Fahrradmonster aber schlecht gegen Müllmonster."
                "Sticky in den Kampf schicken!":
                    if active_a = "dog":
                        play sound pokout
                        hide pogdog
                        with moveoutleft
                    elif active_a = "street":
                        play sound pokout
                        hide pokstreet
                        with moveoutleft
                    $ active_a = "stick"
                    play sound pokin
                    show poksticky at protagonist
                    with moveinleft
                    p "Los Sticky!"
                    $ activeHP_a = HP_stick
                    
                "Doch lieber ein anderes Monster..." if HP_dog >= 0 or HP_street >= 0:
                    jump switch
        
        "Roadeo" if HP_street >= 0:
            n "Hmm, Roadeo ist gut gegen Müllmonster aber schlecht gegen Fahrradmonster."
            menu:
                n "Hmm, Roadeo ist gut gegen Müllmonster aber schlecht gegen Fahrradmonster."
                "Roadeo in den Kampf schicken!":
                    if active_a = "dog":
                        play sound pokout
                        hide pogdog
                        with moveoutleft
                    elif active_a = "stick":
                        play sound pokout
                        hide pokstreet
                        with moveoutleft
                    $ active_a = "street"
                    play sound pokin
                    show pokstreet at protagonist
                    with moveinleft
                    p "Los Roadeo!"
                    $ activeHP_a = HP_street
                    
                "Doch lieber ein anderes Monster..." if HP_dog >= 0 or HP_stick >= 0:
                    jump switch
        
    
label kampf:
    
    $ defense += 1
    
    if queued == "yes":
        $queued = "no"
        if active_o == "paper":
            "Paperknight läuft an zum Durchstoßen!"
            show pokpaper at aattack with move
            play sound whoosh3
            show pokpaper at antagonist with move
        elif active_o == "garbage":
            "Güllor explodiert in einer Schlammbombe!"
            show pokgarbage at aattack with move
            play sound cardoor1
            show pokgarbage at antagonist with move
        else:
            "Biclops ist bereit zum Überfahren!"
            show pokbike at aattack with move
            play sound bikebreak
            show pokbike at antagonist with move
        if (active_a, active_o) in disadvantage:
            $ randomnum = renpy.random.randint(50,70)
            "Ein kritischer Treffer!"
        elif(active_a, active_o) in advantage:
            $ randomnum = renpy.random.randint(25,30)
            "Es scheint nicht sehr effektiv zu sein."
        else:
            $ randomnum = renpy.random.randint(35,45)
            "Der Angriff sitzt."

        if defense <= 3:
            $ activeHP_a -= randomnum/2
        else:
            $ activeHP_a -= randomnum  
    
    
    if activeHP_a <=0:
        "Dein Fightemon wurde besiegt!"
        if active_a = "dog":
            play sound pokout
            hide pogdog
            with moveoutleft
        elif active_a = "street":
            play sound pokout
            hide pokstreet
            with moveoutleft
        elif active_a = "stick":
            play sound pokout
            hide poksticky
            with moveoutleft
        jump switch
      
    if active_o == "empty":
        play sound pokin
        show pokpaper at antagonist
        with moveinright
        $ activeHP_b = HP_paper
        $ active_o = "paper"
        "[o] sendet Paperknight in den Kampf!"
    elif activeHP_b < 0 and active_o == "paper":
        $ HP_paper = 0
        show pokpaper dead
        "Paperknight wurde besiegt."
        play sound pokout
        hide pokpaper dead
        with moveoutright
        play sound pokin
        show pokgarbage at antagonist
        with moveinright
        $ activeHP_b = HP_garb
        $ active_o = "garbage"
        o "LOS GÜLLOR!"
    elif activeHP_b < 0 and active_o == "garbage":
        $ HP_garb = 0
        show pokgarbage dead
        "Güllor wurde besiegt."
        play sound pokout
        hide pokgarbage dead
        with moveoutright
        play sound pokin
        show pokbike at antagonist
        with moveinright
        $ activeHP_b = HP_bike
        $ active_o = "bike"
        o "Los Biclops!"
    elif activeHP_b < 0 and active_o == "bike":
        $ HP_bike = 0
        show pokbike dead
        "Biclops wurde besiegt."
        hide pokbike dead
        play sound pokout
        with moveoutright
        o "NEEEEEIIIIN!"
        jump switch
    else:
        "Dein Fightemon hat noch [activeHP_a] HP, der Gegner [activeHP_b]."
        "Was wirst du als nächstes tun?"
    
    

    menu:
        "Angriff":

            if active_a == "dog":
                "Dalmatiger wird agressiv mit einen Knochenbiss!"
            elif active_a == "stick":
                "Sticky verwendet sich für seinen Weitwurf!"
            else:
                "Roadeo bolstert sich auf für seinen Bordsteinkantenhieb!"
                
            if (active_a, active_o) in advantage:
                $ randomnum = renpy.random.randint(50,70)
                "Ein kritischer Treffer!"
            elif(active_a, active_o) in disadvantage:
                $ randomnum = renpy.random.randint(20,30)
                "Es scheint nicht sehr effektiv zu sein."
            else:
                $ randomnum = renpy.random.randint(30,40)
                "Der Angriff sitzt."
            
            $ activeHP_b -= randomnum
        
            
            if active_o == "paper":
                "Paperknight läuft an zum Durchstoßen!"
                show pokpaper at aattack with move
                play sound whoosh3
                show pokpaper at antagonist with move
            elif active_o == "garbage":
                "Güllor explodiert in einer Schlammbombe!"
                show pokgarbage at aattack with move
                play sound cardoor1
                show pokgarbage at antagonist with move
            else:
                "Biclops ist bereit zum Überfahren!"
                show pokbike at aattack with move
                play sound bikebreak
                show pokbike at antagonist with move
                
            if (active_a, active_o) in disadvantage:
                $ randomnum = renpy.random.randint(50,70)
                "Ein kritischer Treffer!"
            elif(active_a, active_o) in advantage:
                $ randomnum = renpy.random.randint(25,35)
                "Es scheint nicht sehr effektiv zu sein."
            else:
                $ randomnum = renpy.random.randint(35,45)
                "Der Angriff sitzt."
                
            if defense <= 3:
                $ activeHP_a -= randomnum/2
            else:
                $ activeHP_a -= randomnum
            
            jump kampf
        
        "Starker Angriff":

            if active_a == "dog":
                "Dalmatiger wird wild und will Zerfleischen!!"
            elif active_a == "stick":
                "Sticky verbiegt sich für einen Stockmerang!"
            else:
                "Roadeo stellt eine Falle mit einem Schlagloch!"
                
            if (active_a, active_o) in advantage:
                $ randomnum = renpy.random.randint(70,90)
                "Ein kritischer Treffer!"
            elif(active_a, active_o) in disadvantage:
                $ randomnum = renpy.random.randint(30,50)
                "Es scheint nicht sehr effektiv zu sein."
            else:
                $ randomnum = renpy.random.randint(40,60)
                "Der Angriff sitzt."
            $ activeHP_b -= randomnum
            $ activeHP_a -= 20
            
            
            if active_o == "paper":
                "Paperknight läuft an zum Durchstoßen!"
                show pokpaper at aattack with move
                play sound whoosh3
                show pokpaper at antagonist with move
            elif active_o == "garbage":
                "Güllor explodiert in einer Schlammbombe!"
                show pokgarbage at aattack with move
                play sound cardoor1
                show pokgarbage at antagonist with move
            else:
                "Biclops ist bereit zum Überfahren!"
                show pokbike at aattack with move
                play sound bikebreak
                show pokbike at antagonist with move
            if (active_a, active_o) in disadvantage:
                $ randomnum = renpy.random.randint(50,70)
                "Ein kritischer Treffer!"
            elif(active_a, active_o) in advantage:
                $ randomnum = renpy.random.randint(25,35)
                "Es scheint nicht sehr effektiv zu sein."
            else:
                $ randomnum = renpy.random.randint(35,45)
                "Der Angriff sitzt."

            if defense <= 3:
                $ activeHP_a -= randomnum/2
            else:
                $ activeHP_a -= randomnum
            
            jump kampf
            
        "Verteidigen":
            $ defense = 0
            
            if active_a == "dog":
                "Dalmatiger rollt sich zu einem Ball zusammen und kreiert ein Schild aus Fell!"
            elif active_a == "stick":
                "Sticky kreiert eine magische Barriere aus seinem Laub!"
            else:
                "Roadeo verwendet ein Teil seines Asphalts, um eine Mauer zu bauen!"
            
            if active_o == "paper":
                "Paperknight läuft an zum Durchstoßen!"
                show pokpaper at aattack with move
                play sound whoosh3
                show pokpaper at antagonist with move
            elif active_o == "garbage":
                "Güllor explodiert in einer Schlammbombe!"
                show pokgarbage at aattack with move
                play sound cardoor1
                show pokgarbage at antagonist with move
            else:
                "Biclops ist bereit zum Überfahren!"
                show pokbike at aattack with move
                play sound bikebreak
                show pokbike at antagonist with move
            if (active_a, active_o) in disadvantage:
                $ randomnum = renpy.random.randint(50,70)
                "Ein kritischer Treffer!"
            elif(active_a, active_o) in advantage:
                $ randomnum = renpy.random.randint(25,35)
                "Es scheint nicht sehr effektiv zu sein."
            else:
                $ randomnum = renpy.random.randint(35,45)
                "Der Angriff sitzt."

            if defense <= 3:
                $ activeHP_a -= randomnum/2
            else:
                $ activeHP_a -= ramomnum
                
            jump kampf
        
        "Wechseln":
            $ queued = "yes"
            jump switch


label win:
    $ win = "yes"
    "Du hast gegen [o] gewonnen!"
    "Gratualtion!"
    jump endbattle

label loss:
    $ win = "no"
    "[o] hat alle deine Monster besiegt!"
    o "Wacker geschlagen, aber noch nicht gut genug!"
    jump endbattle


